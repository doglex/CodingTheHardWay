[TOC]

### 操作系统
是指控制和管理整个计算机系统的**硬件**和**软件**资源，<br>
并合理地组织**调度**计算机的工作和资源的分配，<br>
以提供给用户和其他软件方便的**接口**和**环境**，<br>
是计算机系统中最基本的**系统软件**。

### 操作系统的功能和目标

1. 作为系统资源的管理者<br>
功能:
    + 处理机管理
    + 存储器管理
    + 文件管理
    + 设备管理<br>
目标:高效、安全
2. 作为用户和硬件直接的接口<br>
功能：命令接口(联机命令逐个做，脱机命令做一批)、程序接口(比如dll)、GUI (Graphical User Interface) 
> 命令接口是说直接调用；`程序接口`是说可以`间接使用`，当然是由一堆`系统调用`组成的 😳<br> 
> `系统调用` = `广义指令` 👎

3.对硬件扩展

### 操作系统四大特征
`并发`和`共享`(两个基本，互为条件)， `虚拟`, `异步`
> 并发(concurrency)：多个事件在同一时间`间隔`发生。宏观上(逻辑上)同时发生，微观上(物理上)交错发生 <br>
> 并行(parallelism)：多个时间在同一时间`同时`（物理上）发生。 `那是说要多核了啊，对一个核而言只处理一件事`🤣

+ `并发`：允许多个程序在(交替或并行)运行，即`多道程序技术` 
+ `共享`：互斥共享(独占资源)、(宏观上)同时共享 
+ `虚拟`：物理实体对应到逻辑实体： 比如空分复用(虚拟内存)、时分复用(虚拟CPU搞并发)
+ `异步`：有多个程序并发的时候，对于程序的小片段相对另一个程序来说执行顺序不可预先确定。可以阻塞、可以释放

> 因为业务上有太多时间容忍度很小的事件。事件驱动

### 操作系统的历史
+ 手工操作阶段：纸带机, 用户独占全机、人机速度矛盾导致资源利用率低
+ 单道批处理阶段： 磁盘机+外围机，脱机输入输出，`监督程序`（操作系统雏形）控制I/O :只能串行、大量IO阻塞
+ 多道批处理阶段：交替执行，引入`中断`功能(IO与计算之间可以不相互阻塞了，设备间并行了)，`操作系统诞生`😥。：虽然能并发，但是没法人机`交互`，你要等他这个程序跑完或报错
+ 分时操作系统：时间片轮流服务，那么轮到你的时间片的时候就可以`交互`了，你可以告诉他我这个程序要关掉：但是时间片是公平的，不能`优先处理紧急任务`
+ 实时操作系统：`紧急任务`的时间片可以"插队"，更加及时可靠。比如导弹的硬实时系统、而软实时系统的紧急事件等一等也没事
+ 网络操作系统、分布式操作系统、个人计算机操作系统



### 操作系统运行机制和架构

> `指令` 和`代码`的区别？ C语言代码可能翻译成多条机器语言 (二进制)指令，可以被CPU 具体识别。
+ 特权指令：不允许用户程序使用。比如内存清零指令。
+ 非特权指令：比如普通的运算。

> PSW(程序状态字寄存器)中某个标志位表示CPU状态。
+ CPU处于`用户态`时只能执行非特权指令。
+ CPU处于`核心态`时都可以执行。

> (普通)`应用程序`为了安全，只能用非特权指令。 比如记事本、任务管理器，不是内核功能。

> `内核`(内核程序) 可以执行两种指令，运行在核心态。因此，用了核心态的功能的程序就是内核程序。 比如时钟管理、原语程序(具有原子性，即要么执行要么不执行)、中断处理程序。

> 有的操作系统把进程管理、存储器管理、设备管理也算内核。(如果算，就称为`宏内核`， 否则就是`微内核`)

> `宏内核`：代码庞大、性能高；`微内核`：代码少，需要频繁在核心态和用户态之间切换。




